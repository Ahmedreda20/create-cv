<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./style.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <title>انشاء السيرة الذاتية</title>
</head>
<body>
    <header>
        <a href="../"><h1>C<span>V</span></h1></a>
    </header>
    <div class="banner">
        <div class="banner-box">
            <h1>C<span>V</span> </h1>
            <h2>قم بملىء البيانات الان واحصل علي سيرة ذاتية مجانية  وستكون قادر علي تحمليها
                <br> او تحميل الصفحة لتقوم بالتعديل عليها لاحقاً كما تريد
            </h2>
        </div>
    </div>
    <div class="container">

        <div class="header">
            <p> السيرة الذاتية</p>
        </div>

        <div class="content-box">
            <form action="" id="form">
            <div class="bio">
                <p>البيانات الشخصية</p>
                <div class="group-form">
                    <div class="group-input" id="demo">
                        <label for="name"> الاسم بالكامل <span>*</span></label>
                        <input type="text" id="val1" placeholder="اكتب اسمك.." required autocomplete="off" v-model="message" @click="view(message)">
                    </div>
                </div>
                <div class="group-form">
                    <div class="group-input">
                        <label for="name"> البريد الالكتروني <span>*</span> </label>
                        <input type="email" id="val2" placeholder="اكتب بريدك الالكتروني.." required autocomplete="off">
                    </div>
                </div>
                <div class="group-form">
                    <div class="group-input">
                        <label for="name"> رقم الهاتف   <span>*</span></label>
                        <input type="text" id="val4" placeholder=" ادخل رقم هاتفك .." required autocomplete="off">
                    </div>
                </div>
                <div class="group-form">
                    <div class="group-input">
                        <label for="name"> عمل عن بعد  <span>*</span></label>
                        <input type="text" id="val3" placeholder=" متاح \ غير متاح.." required autocomplete="off">
                    </div>
                </div>
                <div class="group-form">
                    <div class="group-input">
                        <label for="name"> تاريخ الميلاد<span>*</span></label>
                        <input type="date" id="val5" required autocomplete="off">
                    </div>
                </div>    
                <div class="group-form">
                    <div class="group-input">
                        <label for="name">  العنوان <span>*</span></label>
                        <input type="text" id="val6" placeholder="اكتب العنوان بالكامل.." required autocomplete="off">
                    </div>
                </div>    
                <div class="group-form">
                    <div class="group-input">
                        <label for="name"> الحالة الاجتماعية <span>*</span></label>
                        <input type="text" id="val7" placeholder="اكتب حالتك الاجتماعية.." required autocomplete="off">
                    </div>
                </div>         
                <div class="group-form">
                    <div class="group-input">
                        <label for="name"> الجنسية <span>*</span></label>
                        <input type="text" id="val8" placeholder="اكتب  جنسيتك.." required autocomplete="off">
                    </div>
                </div>                   
            </div>

            <div class="bio">
                <p> المؤهلات الدراسية</p>
                <div class="group-form">
                    <div class="group-input">
                        <label for="name">  المؤهل الدراسي <span>*</span></label>
                        <input type="text" id="val9" placeholder="اكتب مؤهلك الدراسي .." required autocomplete="off">
                    </div>
                </div>
                <div class="group-form">
                    <div class="group-input">
                        <label for="name">  سنة التخرج <span>*</span></label>
                        <input type="text" id="val10" placeholder="ادخل سنة التخرج.." required autocomplete="off" min="0" max="2300">
                    </div>
                </div>
            </div>
            <div class="bio">
                <p>الخبرات</p>
                <div class="group-form">
                    <div class="group-input">
                        <label for="name"> المجال او التخصص <span>*</span></label>
                        <input type="text" id="val11" placeholder="اكتب المجال الخاص بك .." required autocomplete="off">
                    </div>
                </div>
                <div class="group-form">
                    <div class="group-input">
                        <label for="name">  سنة خبرة <span>*</span></label>
                        <input type="text" id="val12" placeholder="ادخل عدد السنوات .." required autocomplete="off" min="0" max="100">
                    </div>
                </div>
            </div>
            <div class="bio">
                <p>المهارات</p>
                <div class="group-form">
                    <div class="group-input">
                        <label for="name"> المهارة <span>*</span></label>
                        <input type="text" id="val13" placeholder="اكتب المهارة الخاص بك .." required autocomplete="off">
                    </div>
                </div>
                <div class="group-form">
                    <div class="group-input">
                        <label for="name"> نسبة تلك المهارة  <span>*</span></label>
                        <input type="text" id="val14" placeholder="ادخل  نسبة مئوية.." required autocomplete="off" min="0" max="100">
                    </div>
                </div>
                <div class="group-form">
                    <div class="group-input">
                        <label for="name"> المهارة <span>*</span></label>
                        <input type="text" id="val15" placeholder="اكتب المهارة الخاص بك .." required autocomplete="off">
                    </div>
                </div>
                <div class="group-form">
                    <div class="group-input">
                        <label for="name"> نسبة تلك المهارة  <span>*</span></label>
                        <input type="text" id="val16" placeholder="ادخل  نسبة مئوية.." required autocomplete="off" min="0" max="100">
                    </div>
                </div>
                <div class="group-form">
                    <div class="group-input">
                        <label for="name"> المهارة <span>*</span></label>
                        <input type="text" id="val17" placeholder="اكتب المهارة الخاص بك .." required autocomplete="off">
                    </div>
                </div>
                <div class="group-form">
                    <div class="group-input">
                        <label for="name"> نسبة تلك المهارة  <span>*</span></label>
                        <input type="text" id="val18" placeholder="ادخل  نسبة مئوية.." required autocomplete="off" min="0" max="100">
                    </div>
                </div>
                <div class="group-form">
                    <div class="group-input">
                        <label for="name"> المهارة <span>*</span></label>
                        <input type="text" id="val19" placeholder="اكتب المهارة الخاص بك .." required autocomplete="off">
                    </div>
                </div>
                <div class="group-form">
                    <div class="group-input">
                        <label for="name"> نسبة تلك المهارة  <span>*</span></label>
                        <input type="text" id="val20" placeholder="ادخل  نسبة مئوية.." required autocomplete="off" min="0" max="100">
                    </div>
                </div>
                <div class="group-form">
                    <div class="group-input">
                        <label for="name"> المهارة <span>*</span></label>
                        <input type="text" id="val21" placeholder="اكتب المهارة الخاص بك .." required autocomplete="off" >
                    </div>
                </div>
                <div class="group-form">
                    <div class="group-input">
                        <label for="name"> نسبة تلك المهارة  <span>*</span></label>
                        <input type="text" id="val22" placeholder="ادخل  نسبة مئوية.." required autocomplete="off" min="0" max="100">
                    </div>
                </div>
            </div>

            <div class="bio">
                <p>المزيد عنك</p>
                <div class="group-message">
                    <div class="group-message-form">
                        <textarea id="'val23" required placeholder="ادخل المزيد عنك وقم بكتابة كل ما تريده هنا.." value=""></textarea>
                    </div>
                </div>
            </div>
            <button class="btn-save">حفظ</button>
            </form>
            <div class="bio">
                <p>تحميل الصور المستخدمة في السيرة الذاتية</p>
                <div class="group-form">
                    <div class="group-input">
                    <label for="profile"> تحميل الصورة الشخصية</label>
                    <input type="file"  id="profile" accept="image/*">
                </div>
            </div>
                <div class="group-form">
                    <div class="group-input">
                    <label for="cover"> تحميل  الخلفية</label>
                    <input type="file"  id="cover" accept="image/*">
                </div>
            </div>
            </div>

        </div>
    </div>
    <!-- Log in if user didn't sign in before visit this page -->
    <div class="container-signup">

        <div class="form-signup">
            <div class="header-form">
                <p>قم بتسجيل الدخول لبدء اول سيرة ذاتية لك مجانا</p>
            </div>
            <div class="group-form-up"> 
                <form action="" class="log"> 
                        <p></p>
                <div class="group-form-input er">
                    <input type="email"  id="email" placeholder="البريد الالكتروني" required autocomplete="off">
                </div>
                <div class="group-form-input">
                    <input type="password"  id="pword" placeholder="كلمة السر" required autocomplete="off">
                    <i class="fa fa-eye"></i>
                </div>
                <div class="group-form-input">
                    <button class="btn-signup" type="submit">تسجيل الدخول</button>
                </div>
                <a href="../new-user/">ليس لدي حساب؟</a>
            </div>
        </form>
        </div>
    </div>

    <footer>
        <p>
            CopyRight &copy; all rights reserved Building and design by <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="leaf" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" class="svg-inline--fa fa-leaf fa-w-18 fa-7x"><path fill="currentColor" d="M546.2 9.7c-5.6-12.5-21.6-13-28.3-1.2C486.9 62.4 431.4 96 368 96h-80C182 96 96 182 96 288c0 7 .8 13.7 1.5 20.5C161.3 262.8 253.4 224 384 224c8.8 0 16 7.2 16 16s-7.2 16-16 16C132.6 256 26 410.1 2.4 468c-6.6 16.3 1.2 34.9 17.5 41.6 16.4 6.8 35-1.1 41.8-17.3 1.5-3.6 20.9-47.9 71.9-90.6 32.4 43.9 94 85.8 174.9 77.2C465.5 467.5 576 326.7 576 154.3c0-50.2-10.8-102.2-29.8-144.6z" class=""></path></svg> <a href="https://www.facebook.com/profile.php?id=100045058275632">Ahmed Reda</a>
        </p>
    </footer>
    <script src="./jquery-3.5.1.min (1).js"></script>
<script src="https://www.gstatic.com/firebasejs/7.15.5/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.15.5/firebase-firestore.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.15.5/firebase-database.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.15.5/firebase-storage.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.15.5/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.15.5/firebase-analytics.js"></script>

<script>
  var firebaseConfig = {
    apiKey: "AIzaSyCE1UG2U-fQ33pNjUik65eTlkMbUUH8m64",
    authDomain: "free-cv-0.firebaseapp.com",
    databaseURL: "https://free-cv-0.firebaseio.com",
    projectId: "free-cv-0",
    storageBucket: "free-cv-0.appspot.com",
    messagingSenderId: "77785431839",
    appId: "1:77785431839:web:a5365a7e103c0ad5c6fa2a",
    measurementId: "G-L4Y1EXXJB8"
  };
  firebase.initializeApp(firebaseConfig);
</script>
 <script type="text/javascript">
$(window).scroll(function () {
if ($(this).scrollTop() > 400) {
    // $('body').append('<audio src="./message_tone.mp3" autoplay type="audio/mp3"></audio>')
} else{
    // $('header').css('background' , 'transparent')
}
});
var database = firebase.database().ref('data');
$(document).ready(function(){
var con = document.querySelectorAll('.group-form')
var container =document.querySelector('.content-box');
for(var i =0; i < con.length; i++){
    var x = con[i]
    var y  = con[i].children[0].children[1]
        // console.log(y)
} 
});

var container =document.querySelector('.content-box');
for(var i =0; i <container.children[0].children.length; i++){
var all = container.children[0].children[i];
    // console.log(all);
}


var db = firebase.firestore();

var form = document.getElementById('form');

form.addEventListener('submit' , (e)=>{
e.preventDefault();
var name  = form['val1'].value;
var email  = form['val2'].value;
var phonenumber  = form['val3'].value;
var phone  = form['val4'].value;
var date  = form['val5'].value;
var address  = form['val6'].value;
var relation  = form['val7'].value;
var ID  = form['val8'].value;
var highschool  = form['val9'].value;
var yearout  = form['val10'].value;
var sep  = form['val11'].value;
var exp  = form['val12'].value;
var skil1  = form['val13'].value;
var skil1_precent  = form['val14'].value;
var skil2  = form['val15'].value;
var skil2_precent   = form['val16'].value;
var skil3  = form['val17'].value;
var skil3_precent   = form['val18'].value;
var skil4  = form['val19'].value;
var skil4_precent   = form['val20'].value;
var skil5  = form['val21'].value;
var skil5_precent  = form['val22'].value;
// var more  = document.querySelector('group-form textarea').value;
firebase.auth().onAuthStateChanged(function(user) {
   if (user) {
db.collection("cv").doc(user.uid).set({
    more: $('.group-message-form textarea').val(),
    name: name,
    email: email,
    phonenumber: phonenumber,
    phone: phone,
    date: date,
    address: address,
    relation: relation,
    ID: ID,
    highschool: highschool,
    yearout: yearout,
    sep: sep,
    exp: exp,
    skil1: skil1,
    skil1_precent: skil1_precent,
    skil2: skil2,
    skil2_precent: skil2_precent,
    skil3: skil3,
    skil3_precent: skil3_precent,
    skil4: skil4,
    skil4_precent: skil4_precent,
    skil5: skil5,
    skil5_precent: skil5_precent
    })
   }
});
    $('body').append('<div class="popup"><div class="box"><div class="success"></div><p>بالفعل لقد قمت بانشاء السيرة الذاتية الخاصة بك بنجاح انتظر بضع ثواني للانتقال الي الخطوة الثانية.</p></div><div class="loading"></div></div>')
    setInterval(function(){
         location.reload();
         window.open('../cv')
        form.reset();
    },  2000);
});

$(window).scroll(function () {
if ($(this).scrollTop() > 70) {
    $('.btn-save').css('transform' ,'rotate(270deg) translateY(-40%)');
}else{
    $('.btn-save').css('transform' ,'rotate(270deg) translateY(-250%)');
}
});




$('.fa-eye').click(function(){

    $(this).toggleClass("fa-eye fa-eye-slash");
  var input = document.getElementById('pword');
  if (input.type === "password") {
      input.type = 'text';
  } else {
    input.type = 'password';

  }
});

 firebase.auth().onAuthStateChanged(function(user) {
   if (user) {
       console.log(user.uid)
       $('header').append('<div class="user-img"><img src="" alt="profile" id="user"><div class="user-data" ><ul></ul><span id="close"></span></div></div>')
     
       var modal  = document.querySelector('.user-data')
            var usermm  = document.querySelector('.user-img')
            usermm.addEventListener('click' ,  function(){
            if(modal.style.display = "none"){
                modal.style.display = "block"
            }else{
                modal.style.display = "none"
            }
            });
            window.onclick = function(event) {
            if (event.target == modal) {
                modal.style.display = "none";
            }
            }
            db.collection('users').doc(user.uid).get().then(function(doc){
                $('.user-data ul').append("<li><svg xmlns='http://www.w3.org/2000/svg' aria-hidden='true' focusable='false' data-prefix='far' data-icon='user' class='svg-inline--fa fa-user fa-w-14' role='img' viewBox='0 0 448 512'><path fill='currentColor' d='M313.6 304c-28.7 0-42.5 16-89.6 16-47.1 0-60.8-16-89.6-16C60.2 304 0 364.2 0 438.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-25.6c0-74.2-60.2-134.4-134.4-134.4zM400 464H48v-25.6c0-47.6 38.8-86.4 86.4-86.4 14.6 0 38.3 16 89.6 16 51.7 0 74.9-16 89.6-16 47.6 0 86.4 38.8 86.4 86.4V464zM224 288c79.5 0 144-64.5 144-144S303.5 0 224 0 80 64.5 80 144s64.5 144 144 144zm0-240c52.9 0 96 43.1 96 96s-43.1 96-96 96-96-43.1-96-96 43.1-96 96-96z'/></svg> " + doc.data().name +" </li><li><svg aria-hidden='true' focusable='false' data-prefix='fal' data-icon='at' role='img' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512' class='svg-inline--fa fa-at fa-w-16 fa-7x'><path fill='currentColor' d='M256 8C118.941 8 8 118.919 8 256c0 137.058 110.919 248 248 248 52.925 0 104.68-17.078 147.092-48.319 5.501-4.052 6.423-11.924 2.095-17.211l-5.074-6.198c-4.018-4.909-11.193-5.883-16.307-2.129C346.93 457.208 301.974 472 256 472c-119.373 0-216-96.607-216-216 0-119.375 96.607-216 216-216 118.445 0 216 80.024 216 200 0 72.873-52.819 108.241-116.065 108.241-19.734 0-23.695-10.816-19.503-33.868l32.07-164.071c1.449-7.411-4.226-14.302-11.777-14.302h-12.421a12 12 0 0 0-11.781 9.718c-2.294 11.846-2.86 13.464-3.861 25.647-11.729-27.078-38.639-43.023-73.375-43.023-68.044 0-133.176 62.95-133.176 157.027 0 61.587 33.915 98.354 90.723 98.354 39.729 0 70.601-24.278 86.633-46.982-1.211 27.786 17.455 42.213 45.975 42.213C453.089 378.954 504 321.729 504 240 504 103.814 393.863 8 256 8zm-37.92 342.627c-36.681 0-58.58-25.108-58.58-67.166 0-74.69 50.765-121.545 97.217-121.545 38.857 0 58.102 27.79 58.102 65.735 0 58.133-38.369 122.976-96.739 122.976z'></path></svg> " + doc.data().email + "</li><li><svg aria-hidden='true' focusable='false' data-prefix='fal' data-icon='mobile-android' role='img' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 320 512' class='svg-inline--fa fa-mobile-android fa-w-10 fa-7x'><path fill='currentColor' d='M196 448h-72c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h72c6.6 0 12 5.4 12 12v8c0 6.6-5.4 12-12 12zM320 48v416c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V48C0 21.5 21.5 0 48 0h224c26.5 0 48 21.5 48 48zm-32 0c0-8.8-7.2-16-16-16H48c-8.8 0-16 7.2-16 16v416c0 8.8 7.2 16 16 16h224c8.8 0 16-7.2 16-16V48z'></path></svg>"  + doc.data().phone + " </li><li><a class='signout' onclick='firebase.auth().signOut().then(()=>{location.reload();}).catch(error =>{console.log(error.message)});'>! تسجيل الخروج</a></li>");
            });

    $(document).ready(function(){
    //picture profile  
    let file = {};
    $('#profile').change(function(e){
    var file = e.target.files[0];
    firebase.storage().ref('users/' + user.uid + '/profile-cv.png').put(file).then(function(){
    console.log('image already saved');
    })
    });
    //cover profile
    $('#cover').change(function(e){
    var file = e.target.files[0];
    firebase.storage().ref('users/' +user.uid+ '/cover-cv.png').put(file).then(function(){
    console.log('image already saved');
    })
    });
    })
        firebase.storage().ref('users/'  + user.uid + '/profile.png').getDownloadURL().then(imgUrl =>{
        $('#user').attr('src' , imgUrl);
        })
    } else {
     $('.container-signup').css('display' , 'flex');
     $('body').css('overflow' , 'hidden');
     $('.container-signup').fadeIn()
   }
 });

var login = document.querySelector('.log');
login.addEventListener('submit' , (e) =>{
e.preventDefault();
var email = login['email'].value;
var password = login['pword'].value;

firebase.auth().signInWithEmailAndPassword(email, password).catch(function(cred) {
login.reset();
    }).catch(error =>{  
            $('.log p').html('ربما  هناك خطأ ما يرجى اعادة المحاولة مجدداً')
    })
});


</script>
</body>
</html>